<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>

  <%= devise_error_messages! %>

  <p>
   <%= f.label :name, 'Full Name', :class => "form-question" %><br />
   <%= f.text_field :name, :class => "form-short-edit-profile" %>
  </p>
  <br>

  <p>
   <%= f.label :email, 'Email', :class => "form-question" %><br />
   <%= f.text_field :email, :class => "form-short-edit-profile" %>
  </p>  
  <br>

  <p>
    <%= label_tag :location_lookup, 'City, State', :class => "form-question" %><br />
    <%= text_field_tag :citySearch, "", :class => "form-short-edit-profile", :autocomplete => "off" %>
    <%= f.hidden_field :city_id %>
  </p>  
  <br>

  <script type="text/javascript">
    $("ul.typeahead.dropdown-menu").find('li.active').data('value')
    $('#citySearch').typeahead({
      source: function(typeahead, query) {
        var _this = this;
        return $.ajax({
          url: "<%= cities_path(:format => :json) %>?q=" + query,
          success: function(data) {
            return typeahead.process(data);
          }
        });
      },
      property: "name",
      onselect: function (obj) {
        $('#user_city_id').val(obj.id);
      }
    });
  </script>

  <p>
    <%= f.label :password, :class => "form-question" %><br>
    <%= f.password_field :password, :class => "form-short-edit-profile" %>
  </p>  
  <br>

  <p>
    <%= f.label :password_confirmation, :class => "form-question" %><br>
    <%= f.password_field :password_confirmation, :class => "form-short-edit-profile" %>
  </p>

  <div class="page-section-float-left">
    <%= f.submit "Sign up", :class => "btn", :id => 'user_submit'%>
  </div>


<% end %> 