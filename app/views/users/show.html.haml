.page
  .page-content

    .page-section-float-left  
      - if (@approved_courses.any? || @pending_courses.count != 0 || !@user.photo.exists? || @user.zip.blank? || @user.location.blank?) && current_user == @user
        .notification-center
          #notification-header Notifications 
          - if @approved_courses.any?
            %img{:src => '/images/v2/notification_bolt.png'}
            %p Your class has been approved!
            =link_to_function 'Fill out your class profile', "$('.section').hide(); $('#approved').show()", :class => 'notification'
            = "to post it live!"
            %br
            %br
          - if @pending_courses.count != 0
            %img{:src => '/images/v2/notification_bolt.png'}
            %p Your proposal has been submitted successfully. We'll get back to you very soon. In the meantime,
            %a.notification(href="/pdf/handbook-111311.pdf") check out our teacher's handbook.
            %br
            %br
          - if !@user.photo.exists?
            %img{:src => '/images/v2/notification_bolt.png'}
            %p You don't have a profile photo.
            %a.notification(href="/users/edit") Upload one now!
            %br
            %br
          - if @user.zip.blank? || @user.location.blank?
            %img{:src => '/images/v2/notification_bolt.png'}
            %p Want to get notified when new classes happen in your city?
            %a.notification(href="/users/edit") Tell us where you live!
      - else
        /do nothing

    #teaching.section
      .page-section-float-left
        .welcome-header 
          - if current_user == @user
            = "Classes you teach"
          - else
            = "Classes #{@user.name} teaches"
        %img.greyheader_half{:src => '/images/v2/greyheader_half.png'}
        .classRow
          = render :partial => "classes", :locals => {:classes_this_week => @user.recent_classes_as_teacher}
          = render :partial => "classes", :locals => {:classes_this_week => @user.past_classes_as_teacher}
          - if current_user == @user
            = render :partial => "classes_approved", :locals => {:pending => @user.approved_classes}


    #attending.section
      .page-section-float-left
        .welcome-header
          - if current_user == @user
            = "Classes you take"
          - else
            = "Classes #{@user.name} takes"
        %img.greyheader_half{:src => '/images/v2/greyheader_half.png'}
        .classRow
          = render :partial => "classes", :locals => {:classes_this_week => @user.recent_classes_as_student}
          = render :partial => "classes", :locals => {:classes_this_week => @user.past_classes_as_student}


    #suggestions.section
      .page-section-float-left
        .welcome-header 
          - if current_user == @user
            = "Classes you suggested"
          - else
            = "Classes #{@user.name} suggested"
        %img.greyheader_half{:src => '/images/v2/greyheader_half.png'}
        = render :partial => "suggestions", :locals => {:suggestions => @user.suggestions}
 
    
    #approved.section{:style => 'display:none;'}
      .page-section-float-left
        .welcome-header Classes Approved
        %img.greyheader_half{:src => '/images/v2/greyheader_half.png'}
        = render :partial => "classes_approved", :locals => {:pending => @user.approved_classes}


    #pending.section{:style => ('display:none;' unless params[:show] == 'pending')}
      .page-section-float-left
        .welcome-header Classes pending approval
        %img.greyheader_half{:src => '/images/v2/greyheader_half.png'}
        = render :partial => "classes_pending", :locals => {:pending => @user.pending}
      .page-section-float-left
        .welcome-header Classes Approved
        %img.greyheader_half{:src => '/images/v2/greyheader_half.png'}
        = render :partial => "classes_approved", :locals => {:pending => @user.approved_classes}

= render :partial => 'sidebar'